automation:
  - automation: Update guest PIN code
    trigger:
      - platform: mqtt
        topic: /homeassistant/guest-pin/set
    action:
      - service: input_text.set_value
        data_template:
          entity_id: "{{ trigger.payload_json.payload.entity_id }}"
          value: "{{ trigger.payload_json.payload.pin }}"

  - automation: Enable guest PIN code
    trigger:
      - platform: mqtt
        topic: /homeassistant/guest-pin/enable
    action:
      - service: input_boolean.turn_on
        data_template:
          entity_id: "{{ trigger.payload_json.payload.entity_id }}"

  - automation: Disable guest PIN code
    trigger:
      - platform: mqtt
        topic: /homeassistant/guest-pin/disable
    action:
      - service: input_boolean.turn_off
        data_template:
          entity_id: "{{ trigger.payload_json.payload.entity_id }}"