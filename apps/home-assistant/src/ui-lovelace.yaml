title: Home
views:
  - theme: Backend-selected
    title: Home
    path: default_view
    icon: fas:home
    type: custom:grid-layout
    layout:
      grid-template-columns: auto 30%
      grid-template-rows: auto
      grid-auto-flow: row dense;
      grid-template-areas: |
        "header header"
        "main sidebarHeader"
        "main sidebar"
        "footer footer"
      mediaquery:
        "(max-width: 600px)":
          grid-auto-flow: row dense;
          grid-template-columns: 100%
          grid-template-areas: |
            "header"
            "sidebarHeader"
            "main"
            "sidebar"
            "footer"
    badges: []
    cards:
      # Header
      - type: custom:layout-card
        view_layout:
          grid-area: header
        layout_type: custom:grid-layout
        layout:
          grid-template-columns: 100%
          grid-template-rows: auto
        cards:
          # Critical alerts
          - type: conditional
            conditions:
              - entity: binary_sensor.any_alerts
                state: "on"
            card:
              type: custom:mod-card
              style: |-
                ha-card {
                  border: 1px solid red;
                  padding: 8px;
                }
              view_layout:
                grid-area: header
              card:
                type: vertical-stack
                cards:
                  - type: vertical-stack
                    cards:
                      - type: custom:mushroom-chips-card
                        card_mod:
                          style: |-
                            ha-card {
                              justify-content: center;
                            }
                        alignment: end
                        chips:
                          - type: conditional
                            conditions:
                              - entity: binary_sensor.pending_system_alerts
                                state: "off"
                            chip:
                              type: entity
                              entity: binary_sensor.pending_system_alerts
                              content_info: name
                              name: Water Leak
                              icon: mdi:water-alert
                              icon_color: red
                              tap_action:
                                action: fire-dom-event
                                browser_mod:
                                  command: popup
                                  title: Water Leak
                                  card:
                                    - type: vertical-stack
                                      cards:
                                        - type: custom:mushroom-entity-card
                                          entity: switch.shutoff_valve
                              hold_action:
                                action: none
                              double_tap_action:
                                action: none
                          - type: conditional
                            conditions:
                              - entity: binary_sensor.water_temperature_alert
                                state: "off"
                            chip:
                              type: entity
                              entity: binary_sensor.water_temperature_alert
                              name: Freeze Alert
                              content_info: name
                              icon: mdi:snowflake-alert
                              tap_action:
                                action: fire-dom-event
                                browser_mod:
                                  command: popup
                                  title: Freeze Alert
                                  card:
                                    - type: horizontal-stack
                                      cards:
                                        - type: custom:mushroom-entity-card
                                          entity: sensor.water_temperature
                                        - type: custom:mushroom-entity-card
                                          entity: sensor.outside_temperature
                              layout: vertical
                  - type: horizontal-stack
                    cards:
                      # Front door alert
                      - type: custom:mod-card
                        style: |-
                          ha-card {display:
                            {{ 'initial' if is_state('binary_sensor.guests_recently_detected_at_front_door', 'on') else 'none' }}
                          }
                        card:
                          type: vertical-stack
                          cards:
                            - type: custom:mushroom-template-card
                              primary: Front Door
                              secondary: >-
                                {% set seconds_difference = (as_timestamp(now()) -
                                as_timestamp(states.sensor.front_door_person_count.last_changed)) %}
                                {% set minutes_difference = (seconds_difference) / 60 %}
                                {% set time_ago = iif(seconds_difference < 60, 'now',
                                iif(seconds_difference < 3600, iif(seconds_difference / 60 | round
                                > 1, ((seconds_difference / 60) | round(0)) | string + ' minutes
                                ago', ((seconds_difference / 60) | round(0)) | string + ' minute
                                ago' ), ((seconds_difference / 3600) | round(0))| string + ' hours
                                ago')) %}
                                {{ states('sensor.front_door_person_count') | int(1) }} guest{%if
                                (states('sensor.front_door_person_count') | int(1) > 1) %}s{%endif%}
                                {{ time_ago }}
                              icon: mdi:shield-account
                              entity: sensor.front_door_person_count
                              badge_icon: ""
                              multiline_secondary: false
                              fill_container: false
                              layout: vertical
                              show_state: false
                              show_name: false
                              camera_view: auto
                              tap_action:
                                action: fire-dom-event
                                browser_mod:
                                  command: popup
                                  title: Front Door
                                  card:
                                    type: vertical-stack
                                    cards:
                                      - type: custom:mushroom-template-card
                                        primary: Guests
                                        secondary: >-
                                          {% set seconds_difference = (as_timestamp(now()) -
                                          as_timestamp(states.sensor.front_door_person_count.last_changed)) %}
                                          {% set minutes_difference = (seconds_difference) / 60 %}
                                          {% set time_ago = iif(seconds_difference < 60, 'now',
                                          iif(seconds_difference < 3600, iif(seconds_difference / 60 | round
                                          > 1, ((seconds_difference / 60) | round(0)) | string + ' minutes
                                          ago', ((seconds_difference / 60) | round(0)) | string + ' minute
                                          ago' ), ((seconds_difference / 3600) | round(0))| string + ' hours
                                          ago')) %}
                                          {{ states('sensor.front_door_person_count') | int(1) }} guest{%if
                                          (states('sensor.front_door_person_count') | int(1) > 1) %}s{%endif%}
                                          {{ time_ago }}
                                        icon: mdi:shield-account
                                        entity: sensor.front_door_person_count
                                        badge_icon: ""
                                        multiline_secondary: false
                                        fill_container: false
                                        layout: horizontal
                                        show_state: false
                                        show_name: false
                                      - type: custom:frigate-card
                                        cameras:
                                          - live_provider: frigate-jsmpeg
                                            camera_entity: camera.front_door
                                        view:
                                          default: live
                                          camera_select: live
                                          update_cycle_camera: true
                                        menu:
                                          mode: hidden-top
                                          buttons:
                                            snapshots: false
                                            frigate_ui: true
                                        live:
                                          preload: true
                                          auto_unmute: false
                                          controls:
                                            next_previous:
                                              style: chevrons
                                            thumbnails:
                                              mode: below
                                              media: clips
                                          transition_effect: slide
                                        event_gallery:
                                          min_columns: 4
                                        event_viewer:
                                          controls:
                                            next_previous:
                                              style: chevrons
                                            thumbnails:
                                              mode: below
                                          transition_effect: slide
                                        dimensions:
                                          aspect_ratio_mode: unconstrained
                                      - type: custom:mushroom-lock-card
                                        entity: lock.front_door_deadbolt
                                        name: Front Door Lock
                                        fill_container: false
                                        hide_state: false
                                        layout: vertical
                      # Carport door alert
                      - type: custom:mod-card
                        style: |-
                          ha-card {display:
                            {{ 'initial' if is_state('binary_sensor.guests_recently_detected_at_carport_door', 'on') else 'none' }}
                          }
                        card:
                          type: vertical-stack
                          cards:
                            - type: custom:mushroom-template-card
                              primary: Carport Door
                              secondary: >-
                                {% set seconds_difference = (as_timestamp(now()) -
                                as_timestamp(states.sensor.car_port_door_person_count.last_changed)) %}
                                {% set minutes_difference = (seconds_difference) / 60 %}
                                {% set time_ago = iif(seconds_difference < 60, 'now',
                                iif(seconds_difference < 3600, iif(seconds_difference / 60 | round
                                > 1, ((seconds_difference / 60) | round(0)) | string + ' minutes
                                ago', ((seconds_difference / 60) | round(0)) | string + ' minute
                                ago' ), ((seconds_difference / 3600) | round(0))| string + ' hours
                                ago')) %}

                                {{ states('sensor.car_port_door_person_count') | int(1) }} guest{%if
                                (states('sensor.car_port_door_person_count') | int(1) > 1) %}s{%endif%}
                                {{ time_ago }}
                              icon: mdi:shield-account
                              entity: sensor.car_port_door_person_count
                              badge_icon: ""
                              multiline_secondary: false
                              fill_container: false
                              layout: vertical
                              show_state: false
                              show_name: false
                              camera_view: auto
                              tap_action:
                                action: fire-dom-event
                                browser_mod:
                                  command: popup
                                  title: Front Door
                                  card:
                                    type: vertical-stack
                                    cards:
                                      - type: custom:mushroom-template-card
                                        primary: Guests
                                        secondary: >-
                                          {% set seconds_difference = (as_timestamp(now()) -
                                          as_timestamp(states.sensor.car_port_door_person_count.last_changed)) %}
                                          {% set minutes_difference = (seconds_difference) / 60 %}
                                          {% set time_ago = iif(seconds_difference < 60, 'now',
                                          iif(seconds_difference < 3600, iif(seconds_difference / 60 | round
                                          > 1, ((seconds_difference / 60) | round(0)) | string + ' minutes
                                          ago', ((seconds_difference / 60) | round(0)) | string + ' minute
                                          ago' ), ((seconds_difference / 3600) | round(0))| string + ' hours
                                          ago')) %}
                                          {{ states('sensor.car_port_door_person_count') | int(1) }} guest{%if
                                          (states('sensor.car_port_door_person_count') | int(1) > 1) %}s{%endif%}
                                          {{ time_ago }}
                                        icon: mdi:shield-account
                                        entity: sensor.car_port_door_person_count
                                        badge_icon: ""
                                        multiline_secondary: false
                                        fill_container: false
                                        layout: horizontal
                                        show_state: false
                                        show_name: false
                                      - type: custom:frigate-card
                                        cameras:
                                          - live_provider: frigate-jsmpeg
                                            camera_entity: camera.car_port_door
                                        view:
                                          default: live
                                          camera_select: live
                                          update_cycle_camera: true
                                        menu:
                                          mode: hidden-top
                                          buttons:
                                            snapshots: false
                                            frigate_ui: true
                                        live:
                                          preload: true
                                          auto_unmute: false
                                          controls:
                                            next_previous:
                                              style: chevrons
                                            thumbnails:
                                              mode: below
                                              media: clips
                                          transition_effect: slide
                                        event_gallery:
                                          min_columns: 4
                                        event_viewer:
                                          controls:
                                            next_previous:
                                              style: chevrons
                                            thumbnails:
                                              mode: below
                                          transition_effect: slide
                                        dimensions:
                                          aspect_ratio_mode: unconstrained
                                      - type: custom:mushroom-lock-card
                                        entity: lock.carport_deadbolt
                                        name: Carport Lock
                                        fill_container: false
                                        hide_state: false

      #  Sidebar
      - type: custom:layout-card
        layout_type: custom:grid-layout
        layout:
          grid-template-areas: "sidebar-inner"
          grid-template-columns: 100%
          grid-template-rows: auto
        cards:
          # Report defect
          - type: custom:stack-in-card
            mode: vertical
            view_layout:
              grid-area: 1/1
            cards:
              - type: custom:mushroom-template-card
                primary: Hello, {{user}}
                secondary: Having issues, ideas, or requests? Report them here.
                icon: fas:clipboard-list
                layout: horizontal
                tap_action:
                  action: call-service
                  service: local_conditional_card.toggle
                  service_data:
                    ids:
                      - report_issue
                icon_color: blue
                multiline_secondary: true
                hold_action:
                  action: none
                double_tap_action:
                  action: none
              - type: custom:local-conditional-card
                default: hide
                id: report_issue
                card:
                  type: custom:lovelace-multiline-text-input-card
                  entity: input_text.defect_summary
                  title: false
                  placeholder_text: Describe what didn't work and then press the save icon.
                  show_success_messages: false
                  buttons:
                    save: 3
                    paste: false
                    clear: 1
          # Overview chips
          - type: vertical-stack
            view_layout:
              grid-area: 2/1
            cards:
              - type: custom:mushroom-chips-card
                chips:
                  - type: entity
                    entity: sensor.current_temp
                    tap_action:
                      action: call-service
                      service: local_conditional_card.toggle
                      service_data:
                        ids:
                          - climate
                    name: Current temperature
                    hold_action:
                      action: none
                    double_tap_action:
                      action: none
                  - type: conditional
                    conditions:
                      - entity: binary_sensor.are_packages_delivered
                        state: "on"
                    chip:
                      type: entity
                      entity: sensor.mail_packages_delivered
                      content_info: state
                      tap_action:
                        action: none
                      hold_action:
                        action: none
                      double_tap_action:
                        action: none
                  - type: conditional
                    conditions:
                      - entity: group.guests
                        state: home
                    chip:
                      type: entity
                      entity: group.guests
                      name: Guests
                      content_info: name
                      icon: mdi:account-group
                      tap_action:
                        action: none
                      hold_action:
                        action: none
                      double_tap_action:
                        action: none
                alignment: center

      #  Sidebar
      - card:
        type: custom:layout-card
        view_layout:
          grid-area: sidebar
        layout_type: custom:grid-layout
        layout:
          grid-template-columns: 100%
          grid-template-rows: auto
        cards:
          # Front door (desktop)
          - type: custom:mod-card
            style: |
              @media(max-width: 600px) {
                ha-card {
                  display: none !important;
                }
              }
            view_layout:
              grid-area: 1/1
            card:
              type: vertical-stack
              cards:
                - type: custom:mushroom-template-card
                  primary: Front Door
                  secondary: >-
                    {% set seconds_difference = (as_timestamp(now()) -
                    as_timestamp(states.sensor.front_door_person_count.last_changed)) %}
                    {% set minutes_difference = (seconds_difference) / 60 %}
                    {% set time_ago = iif(seconds_difference < 60, 'now',
                    iif(seconds_difference < 3600, iif(seconds_difference / 60 | round
                    > 1, ((seconds_difference / 60) | round(0)) | string + ' minutes
                    ago', ((seconds_difference / 60) | round(0)) | string + ' minute
                    ago' ), ((seconds_difference / 3600) | round(0))| string + ' hours
                    ago')) %}
                    {{ states('sensor.front_door_person_count') | int(1) }} guest{%if
                    (states('sensor.front_door_person_count') | int(1) > 1) %}s{%endif%}
                    {{ time_ago }}
                  icon: mdi:shield-account
                  entity: sensor.front_door_person_count
                  badge_icon: ""
                  multiline_secondary: false
                  fill_container: false
                  layout: horizontal
                  show_state: false
                  show_name: false
                  camera_view: auto
                  tap_action:
                    action: fire-dom-event
                    browser_mod:
                      command: popup
                      title: Front Door
                      card:
                        type: vertical-stack
                        cards:
                          - type: custom:mushroom-template-card
                            primary: Front Door
                            secondary: >-
                              {% set seconds_difference = (as_timestamp(now()) -
                              as_timestamp(states.sensor.front_door_person_count.last_changed)) %}
                              {% set minutes_difference = (seconds_difference) / 60 %}
                              {% set time_ago = iif(seconds_difference < 60, 'now',
                              iif(seconds_difference < 3600, iif(seconds_difference / 60 | round
                              > 1, ((seconds_difference / 60) | round(0)) | string + ' minutes
                              ago', ((seconds_difference / 60) | round(0)) | string + ' minute
                              ago' ), ((seconds_difference / 3600) | round(0))| string + ' hours
                              ago')) %}
                              {{ states('sensor.front_door_person_count') | int(1) }} guest{%if
                              (states('sensor.front_door_person_count') | int(1) > 1) %}s{%endif%}
                              {{ time_ago }}
                            icon: mdi:shield-account
                            entity: sensor.front_door_person_count
                            badge_icon: ""
                            multiline_secondary: false
                            fill_container: false
                            layout: horizontal
                            show_state: false
                            show_name: false
                            camera_view: auto
                          - type: custom:frigate-card
                            cameras:
                              - live_provider: frigate-jsmpeg
                                camera_entity: camera.front_door
                            view:
                              default: live
                              camera_select: live
                              update_cycle_camera: true
                            menu:
                              mode: hidden-top
                              buttons:
                                snapshots: false
                                frigate_ui: true
                            live:
                              preload: true
                              auto_unmute: false
                              controls:
                                next_previous:
                                  style: chevrons
                                thumbnails:
                                  mode: below
                                  media: clips
                              transition_effect: slide
                            event_gallery:
                              min_columns: 4
                            event_viewer:
                              controls:
                                next_previous:
                                  style: chevrons
                                thumbnails:
                                  mode: below
                              transition_effect: slide
                            dimensions:
                              aspect_ratio_mode: unconstrained
                          - type: custom:mushroom-lock-card
                            entity: lock.front_door_deadbolt
                            name: Front Door
                            fill_container: false
                            hide_state: false
                            layout: vertical
                - type: picture-entity
                  entity: camera.front_door
                  camera_image: camera.front_door
          # Carport door (desktop)
          - type: custom:mod-card
            style: |
              @media(max-width: 600px) {
                ha-card {
                  display: none !important;
                }
              }
            view_layout:
              grid-area: 2/1
            card:
              type: vertical-stack
              cards:
                - type: custom:mushroom-template-card
                  primary: Carport Door
                  secondary: >-
                    {% set seconds_difference = (as_timestamp(now()) -
                    as_timestamp(states.sensor.car_port_door_person_count.last_changed)) %}

                    {% set minutes_difference = (seconds_difference) / 60 %}

                    {% set time_ago = iif(seconds_difference < 60, 'now',
                    iif(seconds_difference < 3600, iif(seconds_difference / 60 | round
                    > 1, ((seconds_difference / 60) | round(0)) | string + ' minutes
                    ago', ((seconds_difference / 60) | round(0)) | string + ' minute
                    ago' ), ((seconds_difference / 3600) | round(0))| string + ' hours
                    ago')) %}

                    {{ states('sensor.car_port_door_person_count') | int(1) }} guest{%if
                    (states('sensor.car_port_door_person_count') | int(1) > 1) %}s{%endif%}
                    {{ time_ago }}
                  icon: mdi:shield-account
                  entity: sensor.car_port_door_person_count
                  badge_icon: ""
                  multiline_secondary: false
                  fill_container: false
                  tap_action:
                    action: fire-dom-event
                    browser_mod:
                      command: popup
                      title: Carport Door
                      card:
                        type: vertical-stack
                        cards:
                          - type: custom:mushroom-template-card
                            primary: Carport Door
                            secondary: >-
                              {% set seconds_difference = (as_timestamp(now()) -
                              as_timestamp(states.sensor.car_port_door_person_count.last_changed)) %}
                              {% set minutes_difference = (seconds_difference) / 60 %}
                              {% set time_ago = iif(seconds_difference < 60, 'now',
                              iif(seconds_difference < 3600, iif(seconds_difference / 60 | round
                              > 1, ((seconds_difference / 60) | round(0)) | string + ' minutes
                              ago', ((seconds_difference / 60) | round(0)) | string + ' minute
                              ago' ), ((seconds_difference / 3600) | round(0))| string + ' hours
                              ago')) %}
                              {{ states('sensor.car_port_door_person_count') | int(1) }} guest{%if
                              (states('sensor.car_port_door_person_count') | int(1) > 1) %}s{%endif%}
                              {{ time_ago }}
                            icon: mdi:shield-account
                            entity: sensor.car_port_door_person_count
                            badge_icon: ""
                            multiline_secondary: false
                            fill_container: false
                            layout: horizontal
                            show_state: false
                            show_name: false
                            camera_view: auto
                          - type: custom:frigate-card
                            cameras:
                              - live_provider: frigate-jsmpeg
                                camera_entity: camera.car_port_door
                            view:
                              default: live
                              camera_select: live
                              update_cycle_camera: true
                            menu:
                              mode: hidden-top
                              buttons:
                                snapshots: false
                                frigate_ui: true
                            live:
                              preload: true
                              auto_unmute: false
                              controls:
                                next_previous:
                                  style: chevrons
                                thumbnails:
                                  mode: below
                                  media: clips
                              transition_effect: slide
                            event_gallery:
                              min_columns: 4
                            event_viewer:
                              controls:
                                next_previous:
                                  style: chevrons
                                thumbnails:
                                  mode: below
                              transition_effect: slide
                            dimensions:
                              aspect_ratio_mode: unconstrained
                          - type: custom:mushroom-lock-card
                            entity: lock.carport_deadbolt
                            name: Carport Door
                            fill_container: false
                            hide_state: false
                            layout: vertical
                  layout: horizontal
                  show_state: false
                  show_name: false
                  camera_view: auto
                - type: picture-entity
                  entity: camera.car_port_door
                  camera_image: camera.car_port_door

      #  Main
      - card:
        type: custom:layout-card
        style: |
          ha-card {
            margin: 0!important;
          }
        view_layout:
          grid-area: main
        layout_type: custom:grid-layout
        layout:
          grid-template-area: main-inner
          grid-template-columns: 100%
          grid-template-rows: auto
        cards:
          # Door locks
          - type: conditional
            conditions:
              - entity: binary_sensor.dorri_arrived_home_recently
                state: "on"
            card:
              type: custom:mod-card
              style: |-
                ha-card {
                  display: {{ 'block' if user == 'Dorri Smith' else 'none' }} !important;
                }
              card:
                type: horizontal-stack
                cards:
                  - type: custom:mushroom-lock-card
                    entity: lock.front_door_deadbolt
                    name: Front Door Lock
                    fill_container: false
                    hide_state: false
                    layout: vertical
                  - type: custom:mushroom-lock-card
                    entity: lock.carport_deadbolt
                    name: Carport Lock
                    fill_container: false
                    hide_state: false
                    layout: vertical

          # Mobile shopping list (Andrew)
          - type: conditional
            conditions:
              - entity: person.andrew_smith
                state_not: home
            card:
              type: shopping-list
              card_mod:
                style: |-
                  @media(min-width: 600px) {
                    :host {
                      display: none !important;
                    }
                  }
                  @media(max-width: 600px) {
                    :host {
                      display: none !important;
                      {% for store in ['Publix', 'Kroger', 'Costco'] %}
                        {% if ((states.person|selectattr('attributes.friendly_name', '==', user)|map(attribute='state')|first) | regex_search(store)) %}
                          display: block !important;
                        {% endif %}
                      {% endfor %}
                    }
                  }
              title: Groceries
          # Mobile shopping list (Dorri)
          - type: conditional
            conditions:
              - entity: person.dorri_smith
                state_not: home
            card:
              type: shopping-list
              card_mod:
                style: |-
                  @media(min-width: 600px) {
                    :host {
                      display: none !important;
                    }
                  }
                  @media(max-width: 600px) {
                    :host {
                      display: none !important;
                      {% for store in ['Publix', 'Kroger', 'Costco'] %}
                        {% if ((states.person|selectattr('attributes.friendly_name', '==', user)|map(attribute='state')|first) | regex_search(store)) %}
                          display: block !important;
                        {% endif %}
                      {% endfor %}
                    }
                  }
              title: Groceries
          # Desktop climate
          - type: custom:stack-in-card
            card_mod:
              style: |-
                @media(max-width: 600px) {
                  ha-card {
                    display: none !important;
                  }
                }
            view_layout:
              grid-area: 1/1
            mode: vertical
            cards:
              - type: custom:stack-in-card
                mode: horizontal
                cards:
                  - type: custom:mushroom-entity-card
                    entity: sensor.current_temp
                    layout: vertical
                    name: Current
                    fill_container: false
                    use_entity_picture: false
                    hide_icon: false
                    icon_color: purple
                  - type: custom:mushroom-entity-card
                    entity: sensor.outside_temperature
                    layout: vertical
                    name: Outdoors
                    fill_container: false
                    use_entity_picture: false
                    hide_icon: false
                    icon_color: green
                  - type: custom:mushroom-entity-card
                    entity: sensor.current_target_high_temp
                    layout: vertical
                    name: Max
                    fill_container: false
                    use_entity_picture: false
                    hide_icon: false
                    icon_color: blue
                  - type: custom:mushroom-entity-card
                    entity: sensor.current_target_low_temp
                    layout: vertical
                    name: Min
                    fill_container: false
                    use_entity_picture: false
                    hide_icon: false
                    icon_color: red
              - type: custom:numberbox-card
                border: false
                entity: input_number.user_target_daytime_temp_input
                name: Target Daytime Temperature
                icon: mdi:weather-sunny
              - type: custom:numberbox-card
                border: false
                entity: input_number.user_target_nighttime_temp_input
                name: Target Nighttime Temperature
                icon: mdi:weather-night

          # Mobile climate
          - type: custom:mod-card
            style: |-
              @media(min-width: 600px) {
                ha-card {
                  display: none !important;
                }
              }
            view_layout:
              grid-area: 1/1
            card:
              type: custom:local-conditional-card
              id: climate
              hide: true
              card:
                type: custom:stack-in-card
                mode: vertical
                card_mod:
                  style: |
                    ha-card {
                    }
                cards:
                  - type: custom:layout-card
                    layout_type: custom:grid-layout
                    layout:
                      grid-template-columns: 50% 50%
                      grid-template-rows: auto
                    cards:
                      - type: custom:mushroom-entity-card
                        entity: sensor.current_temp
                        layout: horizontal
                        name: Current
                        fill_container: false
                        use_entity_picture: false
                        hide_icon: false
                        icon_color: purple
                      - type: custom:mushroom-entity-card
                        entity: sensor.outside_temperature
                        layout: horizontal
                        name: Outdoors
                        fill_container: false
                        use_entity_picture: false
                        hide_icon: false
                        icon_color: green
                      - type: custom:mushroom-entity-card
                        entity: sensor.current_target_low_temp
                        layout: horizontal
                        name: Min
                        fill_container: false
                        use_entity_picture: false
                        hide_icon: false
                        icon_color: red
                      - type: custom:mushroom-entity-card
                        entity: sensor.current_target_high_temp
                        layout: horizontal
                        name: Max
                        fill_container: false
                        use_entity_picture: false
                        hide_icon: false
                        icon_color: blue

                  - type: custom:numberbox-card
                    border: false
                    entity: input_number.user_target_daytime_temp_input
                    name: Target Daytime Temperature
                    icon: mdi:weather-sunny
                  - type: custom:numberbox-card
                    border: false
                    entity: input_number.user_target_nighttime_temp_input
                    name: Target Nighttime Temperature
                    icon: mdi:weather-night
          - type: custom:mod-card

            card:
              type: vertical-stack
              cards:
                - type: custom:layout-card
                  layout_type: custom:grid-layout
                  layout:
                    grid-template-columns: 70% 30%
                    grid-template-rows: auto
                  cards:
                    - type: custom:mushroom-title-card
                      title: Upcoming Guests
                    - type: custom:mushroom-chips-card
                      card_mod:
                        style: |-
                          ha-card {
                            height: 100%;
                            display: flex;
                            align-items: center;
                            justify-content: flex-end;
                          }
                      alignment: end
                      chips:
                        - type: entity
                          entity: camera.guest_wifi
                          content_info: name
                          name: Guest Wifi
                          icon: mdi:wifi
                          use_entity_picture: false
                          tap_action:
                            action: fire-dom-event
                            browser_mod:
                              command: popup
                              title: Guest Wifi
                              card:
                                type: vertical-stack
                                cards: []
                  card:
                    type: custom:mushroom-title-card
                    title: Upcoming Guests
                - type: custom:home-feed-card
                  show_empty: true
                  id_filter: "^home_feed.*"
                  calendars:
                    - calendar.guests
                  entities: []

  # Shopping list
  - theme: Backend-selected
    title: Shopping List
    path: shopping-list
    icon: mdi:cart
    type: panel
    badges: []
    cards:
      - type: vertical-stack
        cards:
          - type: custom:mushroom-chips-card
            card_mod:
              style: |
                :host {
                  margin: 8px 16px 0 !important;
                }
            chips:
              - type: back
          - type: shopping-list
            title: Groceries
            card_mod:
              style: |
                :host {
                  margin: 8px 16px 0 !important;
                }

  # Security
  - theme: Backend-selected
    title: Security
    path: security
    icon: mdi:cctv
    type: panel
    badges: []
    cards:
      - type: vertical-stack
        cards:
          - type: custom:mod-card
            style: |
              :host, ha-card {
                height: 100%;
              }
              @media(max-width: 600px) {
                :host {
                  display: none !important;
                }
              }
            card:
              type: custom:surveillance-card
              thumb_interval: 15
              update_interval: 2
              recording_duration: 10
              show_capture_buttons: false
              cameras:
                - entity: camera.front_door
                  motion_entity: binary_sensor.front_door_doorbell_motion
                - entity: camera.car_port_door
                  motion_entity: binary_sensor.carport_doorbell_motion
          - type: custom:mod-card
            style: |-
              @media(min-width: 600px) {
                ha-card {
                  display: none !important;
                }
              }
            card:
              type: vertical-stack
              cards:
                - type: picture-entity
                  entity: camera.front_door
                  camera_image: camera.front_door
                - type: picture-entity
                  entity: camera.car_port_door
                  camera_image: camera.car_port_door

  # Critical Alerts and Service Status
  - theme: Backend-selected
    title: Critical Alerts
    path: critical-alerts
    icon: fas:exclamation-circle
    type: panel
    cards:
      - type: iframe
        url: https://status.smith-simms.family/status/default
        title: Service Health
        aspect_ratio: 100%
