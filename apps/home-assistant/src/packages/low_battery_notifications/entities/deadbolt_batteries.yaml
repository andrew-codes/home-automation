group:
  deadbolts:
    entities:
      - sensor.carport_deadbolt_battery_level
      - sensor.front_door_deadbolt_battery_level

sensor:
  - platform: template
    sensors:
      doors_needing_new_batteries_notification_message:
        friendly_name: Doors that require new batteries
        value_template: >
          {% set entities = expand('group.deadbolts') %}
          {% for x in entities if x.state|int < 15 %}
            {%- if not loop.first and not loop.last %}, {% endif -%}
            {%- if not loop.first and loop.last %}, and {% endif -%}
            {%- if loop.first %}{{- x.name -}}{% endif -%}
            {%- if not loop.first %}{{- x.name|lower -}}{% endif -%}
          {% endfor %}
