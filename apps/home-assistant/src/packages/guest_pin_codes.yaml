automation:
  - alias: Update guest PIN code
    trigger:
      - platform: mqtt
        topic: /homeassistant/guest-pin/set
    action:
      - service: input_text.set_value
        data_template:
          entity_id: "{{ trigger.payload_json.entity_id }}"
          value: "{{ trigger.payload_json.pin }}"

  - alias: Enable guest PIN code
    trigger:
      - platform: mqtt
        topic: /homeassistant/guest-pin/enable
    action:
      - service: input_boolean.turn_on
        data_template:
          entity_id: "{{ trigger.payload_json.entity_id }}"

  - alias: Disable guest PIN code
    trigger:
      - platform: mqtt
        topic: /homeassistant/guest-pin/disable
    action:
      - service: input_boolean.turn_off
        data_template:
          entity_id: "{{ trigger.payload_json.entity_id }}"