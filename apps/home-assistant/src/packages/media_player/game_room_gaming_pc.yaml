wake_on_lan:

binary_sensor:
  - name: Game room gaming-pc power
    platform: ping
    host: !secret GAMING_ROOM_GAMING_PC_IP
    scan_interval: 5
    count: 1

media_player:
  - name: Game room gaming-pc
    unique_id: game_room_gaming_pc
    platform: universal
    children:
      - media_player.game_room_avr
    state_template: >
      {{ 'on' if is_state('binary_sensor.gaming_room_gaming_pc_power_state', 'Connected') else 'off' }}
    commands:
      turn_on:
        service: script.turn_on_game_room_gaming_pc
      turn_off:
        service: button.press
        entity_id: button.gaming_pc_sleep
      volume_set:
        service: media_player.volume_set
        entity_id: media_player.game_room_avr
        data_template:
          volume_level: "{{ volume_level }}"
      volume_up:
        service: media_player.volume_up
        entity_id: media_player.game_room_avr
      volume_down:
        service: media_player.volume_down
        entity_id: media_player.game_room_avr
      volume_mute:
        service: media_player.volume_mute
        entity_id: media_player.game_room_avr
        data_template:
          is_volume_muted: "{{ is_volume_muted }}"
      select_source:
        service: media_player.select_source
        entity_id: media_player.game_room_avr
        data:
          source: PC
    attributes:
      is_volume_muted: media_player.game_room_avr|is_volume_muted
      volume_level: media_player.game_room_avr|volume_level
      source: media_player.game_room_avr|source
