automation:
  - alias: Reset user target temperature
    id: reset_User_target_temperature
    trigger:
      - platform: state
        entity_id: input_number.user_target_daytime_temp_input
        for: "00:{{ states('input_number.user_target_timeout_in_minutes') | int }}:00"
      - platform: state
        entity_id: input_number.user_target_nighttime_temp_input
        for: "00:{{ states('input_number.user_target_timeout_in_minutes') | int }}:00"
    action:
      - service: automation.turn_off
        target:
          entity_id: automation.set_use_user_temperature
      - service: input_number.set_value
        target:
          entity_id: input_number.user_target_daytime_temp_input
        data:
          value: "{{ states('input_number.target_daytime_temp_input') | int }}"
      - service: input_number.set_value
        target:
          entity_id: input_number.user_target_nighttime_temp_input
        data:
          value: "{{ states('input_number.target_nighttime_temp_input') | int }}"
      - service: input_boolean.turn_off
        target:
          entity_id: input_boolean.use_user_temp
      - service: automation.turn_on
        target:
          entity_id: automation.set_use_user_temperature
