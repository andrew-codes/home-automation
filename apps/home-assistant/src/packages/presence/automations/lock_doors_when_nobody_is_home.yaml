automation:
  - alias: Lock doors when nobody is home
    id: lock_doors_when_nobody_is_home
    trigger:
      - platform: state
        entity_id: group.tracked_presence
        to: "not_home"
    action:
      # Lock all doors that are not already locked
      - choose:
          - conditions:
              condition: state
              entity_id: lock.front_door_deadbolt
              state: unlocked
            sequence:
              - service: lock.lock
                entity_id: lock.front_door_deadbolt
      - choose:
          - conditions:
              condition: state
              entity_id: lock.carport_deadbolt
              state: unlocked
            sequence:
              - service: lock.lock
                entity_id: lock.carport_deadbolt
      # - choose:
      #     - conditions:
      #         condition: state
      #         entity_id: lock.basement_door
      #         state: unlocked
      #       sequence:
      #         - service: lock.lock
      #           entity_id: lock.basement_door
